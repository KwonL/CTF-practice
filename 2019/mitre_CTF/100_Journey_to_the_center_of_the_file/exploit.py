#!/usr/bin/python
import subprocess
import os

while True :
    ls_res = os.listdir("./")
    ls_res.remove("challenge.zip")
    ls_res.remove("exploit.py")

    flag_file = ls_res[0]

    res = subprocess.check_output("file ./" + flag_file, shell=True)

    print res

    if "Zip archive" in res :
        res = subprocess.check_output("mv %s flag.zip; unzip flag.zip; rm flag.zip" % flag_file, shell=True)
    elif "bzip2" in res :
        res = subprocess.check_output("mv %s flag.bz; bzip2 -d flag.bz;" % flag_file, shell=True)
    elif "ASCII text with very long" in res :
        res = subprocess.check_output("base64 -d %s > tmp; mv tmp flag" % flag_file, shell=True)
    elif "gzip com" in res :
        res = subprocess.check_output("mv %s flag.gz; gzip -d flag.gz;" % flag_file, shell=True)
    else :
        if "MCA{" in subprocess.check_output("cat %s" % flag_file, shell=True) :
            print "Find!"
            break
        else :
            res = subprocess.check_output("base64 -d %s > tmp; mv tmp flag" % flag_file, shell=True)
